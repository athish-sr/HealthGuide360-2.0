{%load static%}
<!DOCTYPE html>
<html>

<head>
  <!-- Basic -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <!-- Mobile Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <!-- Site Metas -->
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta name="author" content="" />

  <title> HealthCare360 </title>

  <!-- bootstrap core css -->
  <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.css'%}" />

  <!-- fonts style -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet">

  <!--owl slider stylesheet -->
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" />

  <!-- font awesome style -->
  <link href="{% static 'css/font-awesome.min.css'%}" rel="stylesheet" />

  <!-- Custom styles for this template -->
  <link href="{%static 'css/style.css'%}" rel="stylesheet" />
  <!-- responsive style -->
  <link href="{%static 'css/responsive.css'%}" rel="stylesheet" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>


</head>

<body>

  <div class="hero_area">

    <div class="hero_bg_box">
      <div class="bg_img_box">
        <img src="{%static 'images/hero-bg.png'%}" alt="">
      </div>
    </div>

    <!-- header section strats -->
    {% include "header.html" %}
    <!-- end header section -->
    <!-- slider section -->
    <section class="slider_section ">
      <div id="customCarousel1" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <div class="container ">
              <div class="row">
                <div class="col-md-6 ">
                  <div class="detail-box">
                    <h1>
                      HealthCare<br>
                      360
                    </h1>
                    <p>
                      Empowering individuals with personalized health insights, tools, and resources to make informed decisions, improve well-being, and lead healthier lives.
                    </p>
                    <div class="btn-box">
                      <a href="#about" class="btn1">
                        Read More
                      </a>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="img-box">
                    <img src="{%static 'images/index.png'%}" alt="">
                  </div>
                </div>
              </div>
            </div>
          </div>
      </div>

    </section>
    <!-- end slider section -->
  </div>

  <section class="book_section layout_padding">
    <div class="container">
        <div class="row">
            <div class="col">
                <form method="post" action="{% url 'index' %}">
                    {% csrf_token %}
                    <h4>BOOK <span>APPOINTMENT</span></h4>
                    <div class="form-row">
                        <div class="form-group col-lg-4">
                            <label for="{{ form.name.id_for_label }}">Patient Name</label>
                            {{ form.name }}
                            {% if form.name.errors %}
                                <div class="error">{{ form.name.errors }}</div>
                            {% endif %}
                        </div>
                        <div class="form-group col-lg-4">
                            <label for="{{ form.phone_no.id_for_label }}">Phone Number</label>
                            {{ form.phone_no }}
                            {% if form.phone_no.errors %}
                                <div class="error">{{ form.phone_no.errors }}</div>
                            {% endif %}
                        </div>
                        <div class="form-group col-lg-4">
                          <label for="{{ form.email.id_for_label }}">Email</label>
                          {{ form.email }}
                          {% if form.email.errors %}
                              <div class="error">{{ form.email.errors }}</div>
                          {% endif %}
                      </div>
                        <div class="form-group col-lg-4">
                            <label for="{{ form.date.id_for_label }}">Choose Date</label>
                            {{ form.date }}
                            {% if form.date.errors %}
                                <div class="error">{{ form.date.errors }}</div>
                            {% endif %}
                        </div>
                        <div class="form-group col-lg-4">
                          <label for="{{ form.department.id_for_label }}">Department</label>
                          {{ form.department }}
                          {% if form.department.errors %}
                              <div class="error">{{ form.department.errors }}</div>
                          {% endif %}
                      </div>
                      <div class="form-group col-lg-4">
                          <label for="{{ form.doctor.id_for_label }}">Doctor's Name</label>
                          {{ form.doctor }}
                          {% if form.doctor.errors %}
                              <div class="error">{{ form.doctor.errors }}</div>
                          {% endif %}
                      </div>
                    </div>
                    <div class="form-row">
                        
                        <div class="form-group col-lg-4">
                            <label for="{{ form.time.id_for_label }}">Choose Time</label>
                            {{ form.time }}
                            {% if form.time.errors %}
                                <div class="error">{{ form.time.errors }}</div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-lg-12">
                            <label for="{{ form.symptoms.id_for_label }}">Symptoms</label>
                            {{ form.symptoms }}
                            {% if form.symptoms.errors %}
                                <div class="error">{{ form.symptoms.errors }}</div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="btn-box">
                        <button type="submit" class="btn">Submit Now</button>
                    </div>
                    <div class="form-group col-lg-12">
                        <p class="description">
                          You will receive a message regarding the online consultation details once your appointment is confirmed.
                        </p>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

  <!-- about section -->

  <section class="about_section layout_padding" id="about">
    <div class="container  ">
      <div class="heading_container heading_center">
        <h2>
          About <span>Us</span>
        </h2>
        <p>
          Empowering individuals with personalized health insights, tools, and resources to make informed decisions, improve well-being, and lead healthier lives.
        </p>
      </div>
      <div class="row">
        <div class="col-md-6 ">
          <div class="img-box">
            <img src="{%static 'images/img2.jpeg'%}" style="margin-left:130px; heigth:400px; width:400px" alt="">
          </div>
        </div>
        <div class="col-md-6">
          <div class="detail-box">
            <h3>
              Health Care
            </h3>
            <p>
              Our platform offers comprehensive healthcare solutions to help you take control of your well-being. With advanced AI-driven tools, you can quickly access personalized disease diagnosis, mental health assessments, future predictions and cancer prediction insights, all in one place. Additionally, find nearby hospitals and medical facilities and medicine descriptions with ease, ensuring timely care when you need it the most. Our goal is to empower you with accurate, reliable information and resources to support your journey to better health.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- end about section -->

  {% if messages %}
      {% for message in messages %}
        <script type="text/javascript">
          alert("{{ message|escapejs }}");
        </script>
      {% endfor %}
    {% endif %}

  <!-- info section -->

  {%include 'info_section.html'%}
   <!-- datepicker -->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/js/bootstrap-datepicker.js"></script>
  <script src="{% static 'js/book.js' %}" defer></script> 
  <script>
    $(document).ready(function() {
        $('#id_department').change(function() {
            var deptId = $(this).val();
            $.getJSON('{% url "get_doctors" %}', { department_id: deptId }, function(data) {
                var doctorSelect = $('#id_doctor');
                doctorSelect.empty();
                doctorSelect.append('<option value="" disabled selected>Select a doctor</option>');
                $.each(data.doctors, function(i, doc) {
                    doctorSelect.append('<option value="' + doc.id + '">' + doc.name + '</option>');
                });
            });
        });
    
        $('#id_doctor').change(function() {
          console.log("hi");
          var doctorId = $(this).val();
          var date = $('#id_date').val();
          if (doctorId && date) {
              $.getJSON('{% url "get_available_times" %}', { doctor_id: doctorId, date: date }, function(data) {
                  var timeSelect = $('#id_time');
                  timeSelect.empty();
                  timeSelect.append('<option value="" disabled selected>Select a time</option>');
                  $.each(data.available_times, function(i, time) {
                      timeSelect.append('<option value="' + time + '">' + time + '</option>');
                  });
              });
          }
      });
  
    
    });
    </script>

</body>

</html>